<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="css/style.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css">
        <title>Whatsapp Web</title>
    </head>
    <body>
        <header class="mainHeader"></header>
        <main class="backgroundMain">
            <div id="app">
                <div class="container mt-3 myRules">
                    <div class="row">
                        <div class="col-4 p-0">
                            <header class="d-flex justify-content-between align-items-center p-2 headerRules">
                                <div class="userInfo d-flex align-items-center">
                                    <div class="userImg">
                                        <img class="img-fluid tonda" src="img/avatar_1.jpg" alt="Stefano">
                                    </div>
                                    <span>Stefano</span>
                                </div>
                                <div class="symbols">
                                    <span><i class="fa-solid fa-circle-notch p-1"></i></span>
                                    <span><i class="fa-solid fa-comment p-1"></i></span>
                                    <span><i class="fa-solid fa-ellipsis-vertical p-1"></i></span>
                                </div>
                            </header>
                            <main class="d-flex flex-column">
                                <div class="notifiche d-flex align-items-center bg-info">
                                    <span class="icon m-2"><i class="fa-solid fa-bell-slash p-3 text-primary"></i></span>
                                    <div>
                                        <span class="text-light">Ricevi notifiche di nuovi messaggi</span> <br>
                                        <span class="text-light">Attiva notifiche desktop</span>
                                    </div>
                                </div>
                                <div class="input-group input-group-sm">
                                    <input type="text" class="form-control" placeholder="Cerca tra i contatti" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-sm">
                                </div>
                                <div class="chatContainer d-flex flex-column overflow-auto">
                                    <div @click="setActiveChat(index)" v-for="(contact,index) in contacts" :class="(chatCorrente==index)? 'active': ' ' " class="chat d-flex align-items-center mb-2">
                                        <div class="userImg m-2">
                                            <img class="img-fluid tonda" :src="'img/avatar'+ contact.avatar +'.jpg'" alt="contact.name">
                                        </div>
                                        <div>
                                            <span>{{contact.name}}</span> <br>
                                            <small>Ultimo messaggio inviato</small>
                                        </div>
                                    </div>
                                </div>
    
                            </main>
                        </div>
                        <div class="col-8 p-0">
                            <header class="d-flex justify-content-between align-items-center headerRules p-2">
                                <div class="userInfo d-flex align-items-center"> 
                                    <div class="userImg">
                                        <img class="img-fluid tonda" :src=" 'img/avatar' + contacts[chatCorrente].avatar + '.jpg'" alt="">
                                    </div>
                                    <span>{{contacts[chatCorrente].name}}</span>
                                </div>
                                <div class="symbols">
                                    <span><i class="fa-solid fa-magnifying-glass p-1"></i></span>
                                    <span><i class="fa-solid fa-umbrella-beach p-1"></i></span>
                                    <span><i class="fa-solid fa-ellipsis-vertical p-1"></i></span>
                                </div>
                            </header>
                            <main class="mainChat">
                                <div v-for="(element, index) in contacts[chatCorrente].messages" :class="(element.status=='sent')? 'justify-content-end': 'justify-content-start' " class="d-flex mx-5 pt-5">
                                    <div :class="(element.status=='sent')? 'inviato': 'ricevuto'" class="p-2">{{element.message}}</div>
                                </div>
                            </main>
                            <footer >
                                <div class="d-flex justify-content-between align-items-center p-2 bg-light">
                                    <span><i class="fa-regular fa-face-smile"></i></span>
                                    <input @keyup.enter="sendMessage" v-model="messaggio" class="text border border-success p-2 mb-2 border-opacity-50" placeholder="Scrivi un messaggio" type="text">
                                    <span><i class="fa-solid fa-microphone-lines"></i></span>
                                </div>
                            </footer>
                        </div>
                    </div>
                    
                </div>
            </div>
        </main>
        <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
        <script src="js/main.js"></script>
    </body>
</html>